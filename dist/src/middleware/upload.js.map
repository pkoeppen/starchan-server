{"version":3,"file":"upload.js","sourceRoot":"","sources":["../../../src/middleware/upload.ts"],"names":[],"mappings":"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"}